import{u as a,O as s,t as e,c as l,w as t,a as r,b as o,L as i,d,P as n,f as u,e as m}from"./index-CAPtrJAk.js";import{V as p}from"./loader-DsiMNKdA.js";import{V as f}from"./VForm-BOjzfGZY.js";import{a as V,b as c,V as w}from"./VCard-DU3kOVDK.js";import{V as j}from"./VTextField-D66FAfNS.js";import{V as v}from"./VBtn-azOSVwQy.js";import"./VInput-Bq4Ibef0.js";import"./index-CjuU1OvA.js";import"./VIcon-BNrbGrm9.js";import"./VAvatar-ME9kvVmU.js";import"./elevation-Dr-zzJaf.js";const x={__name:"info",setup(x){const y=a(),_=r(),b=s({password:"",confirm:""}),g=e(!1),h={password:[a=>!!a||"密码不能为空"],confirm:[a=>a?a===b.password||"两次输入的密码不一致":"二次确认不能为空"]},F=async a=>{if(!(await a).valid)return!1;g.value=!0;try{await y.repwd(b),_.replace({name:"user"}),y.success("密码修改成功...")}finally{g.value=!1}};return(a,s)=>(o(),l(p,{class:"align-start fill-height mx-auto"},{default:t((()=>[s[3]||(s[3]=i("div",{class:"py-4"},null,-1)),d(w,{class:"mx-auto py-4","max-width":"400",width:"100%",title:"设置新密码",loading:u(g)},{default:t((()=>[d(f,{"fast-fail":"",onSubmit:n(F,["prevent"])},{default:t((()=>[d(V,null,{default:t((()=>[d(j,{modelValue:u(b).password,"onUpdate:modelValue":s[0]||(s[0]=a=>u(b).password=a),label:"新密码",variant:"underlined",rules:h.password,type:"password"},null,8,["modelValue","rules"]),d(j,{modelValue:u(b).confirm,"onUpdate:modelValue":s[1]||(s[1]=a=>u(b).confirm=a),label:"二次确认",variant:"underlined",rules:h.confirm,type:"password"},null,8,["modelValue","rules"])])),_:1}),d(c,null,{default:t((()=>[d(v,{variant:"text",block:"",type:"submit"},{default:t((()=>s[2]||(s[2]=[m(" 确认 ")]))),_:1})])),_:1})])),_:1})])),_:1},8,["loading"])])),_:1}))}};export{x as default};
