import{V as e,b as l}from"./VToolbar-DIHQZaEw.js";import{p as a,k as t,s as o,v as u,ag as i,Y as r,o as v,Z as n,j as s,ah as c,z as d,x as h,A as m,ai as p,y as g,B as f,d as S,m as y,J as H}from"./index-C3ajj0iU.js";const w=a({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll"),b=a({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...l(),...H(),...w(),height:{type:[Number,String],default:64}},"VAppBar"),B=s()({name:"VAppBar",props:b(),emits:{"update:modelValue":e=>!0},setup(l,a){let{slots:s}=a;const H=t(),w=c(l,"modelValue"),b=u(()=>{var e;const a=new Set((null==(e=l.scrollBehavior)?void 0:e.split(" "))??[]);return{hide:a.has("hide"),fullyHide:a.has("fully-hide"),inverted:a.has("inverted"),collapse:a.has("collapse"),elevate:a.has("elevate"),fadeImage:a.has("fade-image")}}),B=u(()=>{const e=b.value;return e.hide||e.fullyHide||e.inverted||e.collapse||e.elevate||e.fadeImage||!w.value}),E=u(()=>{var e,l;return((null==(e=H.value)?void 0:e.contentHeight)??0)+((null==(l=H.value)?void 0:l.extensionHeight)??0)}),{currentScroll:T,scrollThreshold:V,isScrollingUp:z,scrollRatio:A,isAtBottom:x,reachedBottomWhileScrollingDown:I,hasEnoughScrollableSpace:L}=function(e){function l(e){return{clientHeight:"window"in e?window.innerHeight:e.clientHeight,scrollHeight:"window"in e?document.documentElement.scrollHeight:e.scrollHeight}}function a(){const e=f.value;if(!e)return;const{clientHeight:a,scrollHeight:t}=l(e);T.value=t-a>V.value+((null==m?void 0:m.value)||0)}function s(){a()}function c(){const e=f.value;if(!e||h&&!h.value)return;p=S.value,S.value="window"in e?e.pageYOffset:e.scrollTop;const t=e instanceof Window?document.documentElement.scrollHeight:e.scrollHeight;g!==t&&(t>g&&a(),g=t),b.value=p>S.value,H.value=Math.abs(S.value-V.value);const{clientHeight:o,scrollHeight:u}=l(e),i=S.value+o>=u-5;!b.value&&i&&S.value>=V.value&&T.value&&(E.value=!0),(b.value&&p-S.value>1&&!i||Math.abs(S.value-p)>100&&V.value>S.value||5>=S.value)&&(E.value=!1),B.value=i}let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{canScroll:h,layoutSize:m}=d;let p=0,g=0;const f=t(null),S=o(0),y=o(0),H=o(0),w=o(!1),b=o(!1),B=o(!1),E=o(!1),T=o(!0),V=u(()=>+e.scrollThreshold),z=u(()=>i((V.value-S.value)/V.value||0));return r(b,()=>{y.value=y.value||S.value}),r(w,()=>{y.value=0}),v(()=>{r(()=>e.scrollTarget,e=>{var l;const t=e?document.querySelector(e):window;t&&t!==f.value&&(null==(l=f.value)||l.removeEventListener("scroll",c),f.value=t,f.value.addEventListener("scroll",c,{passive:!0}),Promise.resolve().then(()=>{a()}))},{immediate:!0}),window.addEventListener("resize",s,{passive:!0})}),n(()=>{var e;null==(e=f.value)||e.removeEventListener("scroll",c),window.removeEventListener("resize",s)}),h&&r(h,c,{immediate:!0}),{scrollThreshold:V,currentScroll:S,currentThreshold:H,isScrollActive:w,scrollRatio:z,isScrollingUp:b,savedScroll:y,isAtBottom:B,reachedBottomWhileScrollingDown:E,hasEnoughScrollableSpace:T}}(l,{canScroll:B,layoutSize:E}),j=d(()=>b.value.hide||b.value.fullyHide),W=u(()=>l.collapse||b.value.collapse&&(b.value.inverted?A.value>0:0===A.value)),D=u(()=>l.flat||b.value.fullyHide&&!w.value||b.value.elevate&&(b.value.inverted?T.value>0:0===T.value)),M=u(()=>b.value.fadeImage?b.value.inverted?1-A.value:A.value:void 0),N=u(()=>{var e,l;if(b.value.hide&&b.value.inverted)return 0;const a=(null==(e=H.value)?void 0:e.contentHeight)??0,t=(null==(l=H.value)?void 0:l.extensionHeight)??0;return j.value?V.value>T.value||b.value.fullyHide?a+t:a:a+t});h(()=>!!l.scrollBehavior,()=>{m(()=>{w.value=!j.value||(b.value.inverted?T.value>V.value:!L.value||!I.value&&(z.value&&!x.value||V.value>T.value))})});const{ssrBootStyles:P}=p(),{layoutItemStyles:R}=g({id:l.name,order:u(()=>parseInt(l.order,10)),position:d(()=>l.location),layoutSize:N,elementSize:o(void 0),active:w,absolute:d(()=>l.absolute)});return f(()=>{const a=e.filterProps(l);return S(e,y({ref:H,class:["v-app-bar",{"v-app-bar--bottom":"bottom"===l.location},l.class],style:[{...R.value,"--v-toolbar-image-opacity":M.value,height:void 0,...P.value},l.style]},a,{collapse:W.value,flat:D.value}),s)}),{}}});export{B as V};
