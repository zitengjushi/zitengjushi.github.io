import{b as e,V as l}from"./VToolbar-oLIRM5qc.js";import{p as a,t,A as o,C as r,ae as s,W as u,o as v,X as i,k as n,s as c,af as d,D as p,ag as h,E as m,y as f,H as g,d as y,m as S,G as b}from"./index-CAPtrJAk.js";const H=a({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll"),T=a({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...e(),...n(),...H(),height:{type:[Number,String],default:64}},"VAppBar"),V=c()({name:"VAppBar",props:T(),emits:{"update:modelValue":e=>!0},setup(e,a){let{slots:n}=a;const c=t(),H=d(e,"modelValue"),T=r((()=>{var l;const a=new Set((null==(l=e.scrollBehavior)?void 0:l.split(" "))??[]);return{hide:a.has("hide"),fullyHide:a.has("fully-hide"),inverted:a.has("inverted"),collapse:a.has("collapse"),elevate:a.has("elevate"),fadeImage:a.has("fade-image")}})),V=r((()=>{const e=T.value;return e.hide||e.fullyHide||e.inverted||e.collapse||e.elevate||e.fadeImage||!H.value})),{currentScroll:B,scrollThreshold:w,isScrollingUp:E,scrollRatio:I}=function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{canScroll:a}=l;let n=0,c=0;const d=t(null),p=o(0),h=o(0),m=o(0),f=o(!1),g=o(!1),y=r((()=>+e.scrollThreshold)),S=r((()=>s((y.value-p.value)/y.value||0))),b=()=>{const e=d.value;if(!e||a&&!a.value)return;n=p.value,p.value="window"in e?e.pageYOffset:e.scrollTop;const l=e instanceof Window?document.documentElement.scrollHeight:e.scrollHeight;c===l?(g.value=n>p.value,m.value=Math.abs(p.value-y.value)):c=l};return u(g,(()=>{h.value=h.value||p.value})),u(f,(()=>{h.value=0})),v((()=>{u((()=>e.scrollTarget),(e=>{var l;const a=e?document.querySelector(e):window;a&&a!==d.value&&(null==(l=d.value)||l.removeEventListener("scroll",b),d.value=a,d.value.addEventListener("scroll",b,{passive:!0}))}),{immediate:!0})})),i((()=>{var e;null==(e=d.value)||e.removeEventListener("scroll",b)})),a&&u(a,b,{immediate:!0}),{scrollThreshold:y,currentScroll:p,currentThreshold:m,isScrollActive:f,scrollRatio:S,isScrollingUp:g,savedScroll:h}}(e,{canScroll:V}),A=r((()=>T.value.hide||T.value.fullyHide)),x=r((()=>e.collapse||T.value.collapse&&(T.value.inverted?I.value>0:0===I.value))),L=r((()=>e.flat||T.value.fullyHide&&!H.value||T.value.elevate&&(T.value.inverted?B.value>0:0===B.value))),j=r((()=>T.value.fadeImage?T.value.inverted?1-I.value:I.value:void 0)),z=r((()=>{var e,l;if(T.value.hide&&T.value.inverted)return 0;const a=(null==(e=c.value)?void 0:e.contentHeight)??0,t=(null==(l=c.value)?void 0:l.extensionHeight)??0;return A.value?w.value>B.value||T.value.fullyHide?a+t:a:a+t}));p(r((()=>!!e.scrollBehavior)),(()=>{b((()=>{H.value=!A.value||(T.value.inverted?B.value>w.value:E.value||w.value>B.value)}))}));const{ssrBootStyles:N}=h(),{layoutItemStyles:R}=m({id:e.name,order:r((()=>parseInt(e.order,10))),position:f(e,"location"),layoutSize:z,elementSize:o(void 0),active:H,absolute:f(e,"absolute")});return g((()=>{const a=l.filterProps(e);return y(l,S({ref:c,class:["v-app-bar",{"v-app-bar--bottom":"bottom"===e.location},e.class],style:[{...R.value,"--v-toolbar-image-opacity":j.value,height:void 0,...N.value},e.style]},a,{collapse:x.value,flat:L.value}),n)})),{}}});export{V};
