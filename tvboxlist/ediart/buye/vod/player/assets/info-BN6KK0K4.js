import{u as a,a as s,Q as l,k as e,c as o,b as r,w as t,M as i,d,h as u,R as n,g as m}from"./index-C3ajj0iU.js";import{V as p,a as f,b as c}from"./VCard-DTBu3HW2.js";import{V}from"./VForm-DlvED1TM.js";import{V as w}from"./VTextField-CT2tUTqH.js";import{V as j}from"./VBtn-JKfmtoJ-.js";import{V as v}from"./loader-_1sodkhb.js";import"./VAvatar-CsOZoIOv.js";import"./elevation-C2i0gTrO.js";import"./VIcon-DO7afe9J.js";import"./autofocus-CGxummZr.js";import"./index-D7kFa585.js";const x={__name:"info",setup(x){const y=a(),_=s(),b=l({password:"",confirm:""}),g=e(!1),h={password:[a=>!!a||"密码不能为空"],confirm:[a=>a?a===b.password||"两次输入的密码不一致":"二次确认不能为空"]},k=async a=>{if(!(await a).valid)return!1;g.value=!0;try{await y.repwd(b),_.replace({name:"user"}),y.success("密码修改成功...")}finally{g.value=!1}};return(a,s)=>(r(),o(v,{class:"align-start fill-height mx-auto"},{default:t(()=>[s[3]||(s[3]=i("div",{class:"py-4"},null,-1)),d(p,{class:"mx-auto py-4","max-width":"400",width:"100%",title:"设置新密码",loading:u(g)},{default:t(()=>[d(V,{"fast-fail":"",onSubmit:n(k,["prevent"])},{default:t(()=>[d(f,null,{default:t(()=>[d(w,{modelValue:u(b).password,"onUpdate:modelValue":s[0]||(s[0]=a=>u(b).password=a),label:"新密码",variant:"underlined",rules:h.password,type:"password"},null,8,["modelValue","rules"]),d(w,{modelValue:u(b).confirm,"onUpdate:modelValue":s[1]||(s[1]=a=>u(b).confirm=a),label:"二次确认",variant:"underlined",rules:h.confirm,type:"password"},null,8,["modelValue","rules"])]),_:1}),d(c,null,{default:t(()=>[d(j,{variant:"text",block:"",type:"submit"},{default:t(()=>[...s[2]||(s[2]=[m(" 确认 ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["loading"])]),_:1}))}};export{x as default};
